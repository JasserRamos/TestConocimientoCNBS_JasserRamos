@{
    ViewBag.Title = "Inciso 1";
}

<h2 class="text-center my-4">Inciso 1</h2>

<div class="container">
    <p class="lead">
        Se requiere crear un servicio, API, programa o algún tipo de procedimiento que consuma un
        servicio REST para obtener la información de prueba de ciertas declaraciones.
    </p>
    <p>
        a. Esta información debe ser almacenada para posteriormente ser consultada (Si se almacena
        en una base de datos, de preferencia que sea en SQL SERVER o MySQL).
    </p>

    <p><strong>Lo realizado:</strong></p>
    <ul class="list-group mb-4">
        <li class="list-group-item">Se creó el servicio que consume la información de prueba de ciertas declaraciones obtenidas del servicio REST.</li>
        <li class="list-group-item">En la Carpeta Services del proyecto en el archivo <strong>ServicioAPI.cs</strong> se encuentra toda la lógica que se realizó.</li>
        <li class="list-group-item">Se almacena la información en una base de datos SQL Server llamada TestCNBS.</li>
    </ul>

    @if (ViewBag.Error != null)
    {
        <div class="alert alert-danger" role="alert">
            <strong>Error:</strong> @ViewBag.Error
        </div>
    }
    else if (ViewBag.Message != null)
    {
        <div class="alert alert-success" role="alert">
            <strong>@ViewBag.Message</strong>
        </div>
    }

    <h2 class="text-center my-4">Solución</h2>
    <form id="consultaForm" method="post" action="@Url.Action("Index", "Home")" class="mt-4">
        <div class="mb-3 d-flex align-items-center">
            <label for="fechaConsultar" class="form-label me-3">Seleccione la fecha:</label>
            <input type="date" id="fechaConsultar" name="fechaConsultar" class="form-control me-3" required value="@ViewBag.FechaConsultar" />
            <button type="submit" class="btn btn-primary" id="submitBtn">
                <i class="fas fa-paper-plane"></i>
            </button>
        </div>
    </form>

</div>

<div id="loadingOverlay" class="overlay" style="display:none;">
    <div class="spinner-border text-primary" role="status">
        <span class="visually-hidden"></span>
    </div>
</div>

<style>
    .overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(255, 255, 255, 0.8); 
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 9999;
    }
</style>

<script>
    document.getElementById("consultaForm").addEventListener("submit", function(event) {
        document.getElementById("loadingOverlay").style.display = "flex";
        document.getElementById("submitBtn").disabled = true;
    });
</script>
